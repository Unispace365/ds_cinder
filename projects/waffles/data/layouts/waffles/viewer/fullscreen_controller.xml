<interface>

	<layout name="root_layout"
		layout_type="vert"
		layout_size_mode="fixed"
		size="#expr{ 200 * $_waffles:sprite:scale }, #expr{ 200 * $_waffles:sprite:scale }"
		animate_off="$_animation:fade_off"
	>

		<shadow_layout name="bg_shade"
			layout_type="vert"
			layout_size_mode="fill"
			shadow_size="#expr{19 * $_waffles:sprite:scale}"
			shadow_sigma="5"
			shadow_color="black"
			shadow_opacity="0.4"
			shadow_offset="#expr{-2.0 * $_waffles:sprite:scale}, expr{2.0 * $_waffles:sprite:scale}"
			shadow_iterations="5"
		>
			<sprite name="background"
				color="viewer_background"
				layout_size_mode="fill"
			/>
		</shadow_layout>

		<text name="title"
			font="viewer:body"
			color="ui_normal"
			layout_v_align="middle"
			layout_size_mode="flex"
			pad_all="$_ui:padding"
			animate_on="$_animation:item_on"
			model="text:this->record_name"
			layout_fudge="$_ui:text_fudge"
			text_ellipses="end"
		/>

		<layout name="controller_layout"
			layout_type="horiz"
			layout_size_mode="stretch"
			pad_all="$_ui:padding"
			layout_spacing="#expr 0.5 * $_ui:padding"
			overall_alignment="middle"
			skip_hidden_children="true"
		>
			<!--
			<xml name="drawing" src="%APP%/data/layouts/waffles/common/icon_button_no_shadow.xml">
				<property name="the_button" layout_fudge="0, 0" layout_v_align="middle"
					r_pad="$_ui:padding" />
				<property name="up_image" src="%APP%/data/images/waffles/icons/4x/Annotation Tool_256.png" pad_all="0" />
				<property name="down_image" src="%APP%/data/images/waffles/icons/4x/Annotation Tool_256.png" pad_all="0" />
			</xml>
			-->
			<xml name="fullscreen" src="%APP%/data/layouts/waffles/common/icon_button_no_shadow.xml">
				<property name="the_button" layout_fudge="0, 0" layout_v_align="middle"
					r_pad="$_ui:padding" />
				<property name="up_image" src="%APP%/data/images/waffles/icons/4x/Collapse_256.png" pad_all="0" />
				<property name="down_image" src="%APP%/data/images/waffles/icons/4x/Collapse_256.png" pad_all="0" />
			</xml>
			<pinboard_button name="pinboard" visible="false"/>
			<layout name="controller_holder"
				layout_type="vert"
				layout_size_mode="fixed"
				shrink_to_children="true"
				visible="false"
			>
			</layout>
		</layout>

		<xml name="close_button" src="%APP%/data/layouts/waffles/common/close_button.xml">
			<property name="the_button"
				layout_fudge="#expr{-1.0 * $_ui:button_size }, #expr{ ( -1.01 * $_ui:button_size ) - $_ui:corner_radius }" />
		</xml>
	</layout>

</interface>

